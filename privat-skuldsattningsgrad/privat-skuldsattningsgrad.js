/* global FORBANNAD */
(function () {
	'use strict';

	var dataArray = [
		['År', 'Belgien', 'Bulgarien', 'Tjeckien', 'Danmark', 'Tyskland', 'Estland', 'Irland', 'Grekland', 'Spanien', 'Frankrike', 'Kroatien', 'Italien', 'Cypern', 'Lettland', 'Litauen', 'Luxemburg', 'Ungern', 'Malta', 'Holland', 'Österrike', 'Polen', 'Portugal', 'Rumänien', 'Slovenien', 'Slovakien', 'Finland', 'Sverige', 'Storbritannien',],
		['1995', 91.5, null, 64.8, 138.1, 105.6, 28.9, null, 35.7, 74.5, 93, null, 68.5, 317.6, null, 21, null, 40.9, null, 182.8, 103.2, null, 81.5, null, null, 66.7, 95.3, 116.5, 112],
		['1996', 96.4, null, 65.4, 142.8, 110.2, 35.3, null, 36.3, 74.8, 92.6, null, 66.4, 314.7, null, 20.9, null, 42.9, null, 185.7, 104.5, null, 87.9, null, null, 60.9, 92.3, 116.1, 107.6],
		['1997', 100.3, null, 73.1, 144.1, 113, 52, null, 37, 78.2, 92.3, null, 66, 315.2, null, 23.3, null, 44.7, null, 184.6, 108.9, null, 94.4, null, null, 59.2, 84.8, 123.6, 110],
		['1998', 105.4, null, 62.3, 146.1, 116.7, 56.5, null, 40.4, 84.5, 90.8, null, 66.6, 310, null, 25.4, null, 44.8, null, 190.7, 109.4, null, 108.9, 35.9, null, 62.7, 82.8, 127.3, 117.4],
		['1999', 111.7, null, 60.9, 147.9, 119.9, 54.1, null, 43.8, 93.6, 94.7, null, 71.8, 303.6, null, 29.8, null, 49, null, 199.9, 115.2, null, 124.5, 28.2, null, 58.9, 87.8, 132.9, 127.3],
		['2000', 114.6, 26.8, 57, 158.1, 123.2, 54, null, 52.8, 102.5, 99, null, 75.8, 304.6, null, 30.1, null, 56, null, 206.3, 121.7, null, 137.1, 26.6, null, 47.6, 93, 136.5, 131.5],
		['2001', 113.3, 28.9, 50.8, 169.1, 123.3, 61.6, 139.3, 60, 109.4, 103.4, 53.4, 79.7, 274, null, 29.3, null, 57.5, null, 207.3, 123.1, null, 149.8, 26.5, 57.4, 48, 92.6, 143.9, 140.4],
		['2002', 112.4, 32.2, 52.1, 167.1, 122.3, 68, 137.4, 63.8, 116, 103.4, 62.6, 82.7, 277.1, null, 29.7, 244.2, 56.5, null, 208.9, 122.4, null, 155.9, 30.8, 58.9, 51.6, 101.2, 147.4, 148.5],
		['2003', 117.4, 41.3, 46.5, 173.3, 123.1, 74.8, 141.3, 67.9, 126, 103.4, 67.3, 86.3, 258, null, 34.9, 240.3, 67.6, null, 215.9, 125.2, 46.3, 162, 32.8, 62.9, 47, 104.9, 144.8, 148.7],
		['2004', 120.9, 57.3, 47.1, 173, 119.1, 85.4, 149.5, 73.6, 137.3, 104.8, 72, 89.8, 247.7, 64, 40.4, 256.1, 70.5, 127.7, 212.4, 123.3, 41.4, 165.8, 33.1, 67.1, 46.8, 107.6, 144.4, 153.3],
		['2005', 120.6, 72.6, 48.1, 187.7, 117, 96.6, 170.1, 85.7, 154.3, 109.2, 79.3, 96, 266.5, 81.1, 50.2, 202.1, 79.2, 132.8, 215.5, 124, 42, 171.4, 39.1, 76.3, 48.8, 115.9, 151.9, 162.2],
		['2006', 122.7, 91.2, 53, 200, 114.1, 114, 190.5, 92.5, 177.3, 112.6, 91.1, 102.2, 259.2, 97.2, 62.4, 202.4, 83.7, 142, 215.3, 122.9, 47.6, 176.5, 44.5, 82.5, 51.8, 119.2, 154, 167.7],
		['2007', 134.4, 123.4, 57.5, 208.5, 110.9, 123, 198, 101.5, 191.2, 115.6, 100.7, 109.7, 265.5, 102.6, 74.7, 402.3, 94.1, 145.3, 214.9, 124.6, 54.4, 185, 57.8, 96.3, 60.4, 123.6, 167.9, 172.1],
		['2008', 162.2, 131.4, 63.7, 222.3, 109.8, 136.7, 236.5, 113, 195.7, 122.2, 110.3, 113.9, 285, 104.5, 76.7, 357.4, 105.5, 152.9, 216.3, 127.5, 67.3, 196.2, 65.5, 105.6, 64.9, 132.7, 189, 181.5],
		['2009', 164.7, 133.8, 66, 232.2, 113.1, 153.2, 256.7, 116.5, 201.4, 130.5, 118.6, 122.5, 306, 125.4, 83.3, 350.1, 117, 167.6, 231.4, 132.8, 67.1, 204.2, 71.9, 113.5, 69.2, 142.8, 201.5, 185.5],
		['2010', 161.6, 132.5, 68.1, 220.6, 106.6, 140.4, 257.9, 128.1, 200.3, 131.8, 125.2, 123.3, 315.6, 134, 74.5, 302.2, 115.5, 162, 229.5, 132.9, 69.7, 201.5, 73.9, 115.1, 67.4, 148.9, 189, 175.5],
		['2011', 174.1, 124.2, 68.3, 221, 102.7, 120.4, 270.9, 130.2, 196.2, 135.3, 122.6, 122.7, 321.6, 115.5, 64.7, 328.3, 114.9, 159.4, 228.1, 130.1, 73.9, 204.1, 72.9, 113, 70.2, 145.4, 190.7, 173.1],
		['2012', 186.7, 125, 70.7, 224, 102.1, 117.8, 278.8, 131.5, 187.8, 138.5, 119.7, 125.1, 327.4, 98.1, 61.1, 351.2, 102, 154.6, 229.1, 129.2, 73.4, 211.7, 71.9, 112.5, 70.6, 148.6, 192.3, 174],
		['2013', 163.8, 131.9, 73.7, 216.3, 102.8, 115.9, 267.3, 129.1, 176.7, 137.7, 118.4, 121.9, 340.9, 92.7, 56.3, 321.3, 95.4, 147.3, 226.9, 128, 75.4, 204.4, 66.6, 108.2, 74, 147.7, 192.1, 167.8],
		['2014', 163.5, 123.6, 71.5, 215.5, 99.5, 116.7, 281.3, 128.5, 165.4, 142.4, 119.5, 120.1, 354.3, 96.3, 54, 327.9, 91, 140.9, 229.6, 126.2, 78.1, 192.4, 62.1, 98.1, 77.6, 147.4, 192.9, 160],
		['2015', 166.3, 110.5, 68.6, 210, 98.9, 116.6, 303.4, 126.4, 154, 144.3, 115, 117, 353.7, 88.8, 55, 343.1, 83.9, 132.2, 228.8, 126.4, 78.8, 181.5, 59.3, 87.3, 81.4, 155.8, 188.6, 157.7]
	];

	FORBANNAD.loadChart(drawChart);

	function drawChart() {
		var chartData = google.visualization.arrayToDataTable(dataArray);

		var formatter = new google.visualization.NumberFormat(FORBANNAD.numberFormats.twoDigitPercentage);

		FORBANNAD.formatChartDataInColumnRange(formatter, chartData, 1, dataArray[0].length - 1);

		// Find the largest value in our data, so we can set a proper ceiling
		// in the chart, better than the automatic one at least.
		var largestValue = Math.max.apply(Math, $.map(dataArray.slice(1), function (row) {
			return Math.max.apply(Math, row.slice(1));
		}));

		var additionalChartOptions = {
			vAxis: {
				format: FORBANNAD.vAxisFormats.roundedPercentage,
				viewWindow: { max: Math.round(largestValue) + 10 }
			},
			lineWidth: FORBANNAD.lineWidths.thin,
			series: {
				26: { // Sverige
					lineWidth: FORBANNAD.lineWidths.thick
				}
			}
		};

		var chart = new google.visualization.LineChart(document.getElementById('chart'));

		chart.draw(chartData, $.extend({}, FORBANNAD.defaultChartOptions, additionalChartOptions));
	}
}());
