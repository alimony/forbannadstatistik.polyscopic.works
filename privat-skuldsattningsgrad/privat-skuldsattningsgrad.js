/* global FORBANNAD */
(function () {
	'use strict';

	var dataArray = [
		['Year', 'Belgien', 'Bulgarien', 'Tjeckien', 'Danmark', 'Tyskland', 'Estland', 'Irland', 'Grekland', 'Spanien', 'Frankrike', 'Kroatien', 'Italien', 'Cypern', 'Lettland', 'Litauen',
			'Luxemburg', 'Ungern', 'Malta', 'Holland', 'Österrike', 'Polen', 'Portugal', 'Rumänien', 'Slovenien', 'Slovakien', 'Finland', 'Sverige', 'Storbritannien'],
		['1995', 92.3, null, 67.0, 138.2, 108.4, 29.0, null, 41.6, 76.6, 94.2, null, 71.4, 126.3, 12.3, 20.9, null, 39.7, null, 142.8, 102.3, null, 76.7, null, null, 67.7, 96.7, 121.4, 122.6],
		['1996', 98.3, null, 67.5, 140.7, 113.1, 35.4, null, 42.5, 77.1, 93.0, null, 69.1, 136.4, 12.0, 20.8, null, 41.7, null, 148.6, 104.6, null, 81.9, null, null, 61.9, 94.2, 120.3, 117.9],
		['1997', 101.6, null, 75.9, 145.2, 116.1, 52.2, null, 43.8, 80.6, 92.6, null, 68.7, 144.9, 18.0, 23.3, null, 43.7, null, 151.9, 110.9, null, 122.5, null, null, 60.3, 87.6, 128.5, 119.4],
		['1998', 104.4, null, 64.8, 144.9, 119.8, 56.5, null, 48.1, 87.2, 90.9, null, 69.4, 150.7, 24.9, 25.4, null, 43.9, null, 161.6, 111.4, null, 134.2, 36.1, null, 63.7, 84.7, 132.6, 125.7],
		['1999', 108.9, null, 66.9, 150.1, 124.0, 54.2, null, 52.4, 96.7, 95.5, null, 74.7, 157.0, 27.5, 29.8, null, 49.9, null, 175.1, 117.8, null, 144.3, 28.4, null, 59.6, 90.6, 135.6, 135.5],
		['2000', 111.4, 27.3, 63.2, 156.2, 127.4, 54.1, null, 55.2, 106.3, 101.0, null, 79.0, 163.6, 38.9, 30.2, null, 64.4, null, 186.5, 124.9, null, 154.7, 26.7, null, 47.9, 97.1, 140.7, 141.6],
		['2001', 109.3, 29.3, 53.1, 168.7, 128.0, 61.7, 154.7, 62.8, 114.2, 106.3, 54.9, 83.1, 163.7, 47.4, 29.4, null, 62.9, null, 188.0, 127.0, null, 165.9, 26.5, 58.5, 48.3, 96.3, 150.8, 149.7],
		['2002', 109.0, 32.8, 54.4, 166.5, 127.2, 68.0, 151.8, 67.0, 121.2, 106.0, 64.2, 86.1, 170.9, 51.2, 29.8, null, 65.5, null, 192.2, 126.6, null, 169.4, 30.9, 60.0, 52.3, 104.4, 160.7, 157.8],
		['2003', 110.7, 42.0, 48.8, 177.9, 127.2, 75.0, 154.7, 70.9, 131.6, 105.6, 69.6, 90.0, 165.2, 60.1, 35.1, null, 76.7, null, 198.4, 128.6, 46.8, 176.1, 33.0, 64.1, 48.0, 109.2, 159.0, 158.0],
		['2004', 111.8, 58.7, 49.5, 185.8, 123.2, 85.5, 163.9, 77.5, 143.1, 107.3, 74.4, 93.7, 168.2, 71.1, 40.4, null, 77.0, 130.9, 200.7, 127.9, 41.3, 175.7, 33.3, 68.3, 47.9, 112.0, 158.9, 162.6],
		['2005', 109.3, 74.5, 50.8, 201.9, 121.0, 96.7, 187.2, 88.9, 160.8, 111.9, 81.6, 100.2, 204.2, 91.1, 50.2, null, 90.7, 134.8, 207.4, 132.1, 42.7, 184.4, 39.3, 77.7, 50.7, 121.5, 167.2, 173.0],
		['2006', 109.2, 93.7, 55.9, 214.9, 117.7, 115.6, 214.4, 97.1, 184.6, 115.6, 93.8, 106.7, 199.8, 114.4, 62.3, 134.7, 97.9, 145.9, 209.3, 131.9, 49.2, 192.4, 44.8, 83.8, 54.1, 124.3, 169.8, 179.3],
		['2007', 116.1, 130.1, 60.7, 224.0, 114.1, 127.5, 218.6, 106.3, 200.1, 120.0, 103.7, 114.4, 220.4, 119.4, 75.5, 163.9, 111.1, 149.3, 207.8, 133.8, 55.2, 202.9, 58.1, 97.9, 63.2, 127.9, 187.4, 180.8],
		['2008', 145.8, 137.8, 66.4, 237.3, 113.2, 143.9, 256.5, 118.1, 205.5, 126.6, 117.3, 118.8, 238.2, 123.0, 77.9, 399.0, 139.8, 153.7, 207.5, 139.2, 68.5, 215.9, 66.8, 107.6, 67.3, 141.7, 211.7, 189.5],
		['2009', 144.2, 142.9, 68.8, 250.9, 116.5, 154.6, 280.7, 122.2, 212.8, 134.6, 128.0, 125.2, 257.7, 142.9, 84.9, 399.6, 149.1, 169.7, 221.2, 147.3, 68.8, 224.5, 73.3, 115.7, 71.6, 153.2, 225.3, 195.3],
		['2010', 139.6, 140.6, 70.2, 243.2, 110.6, 143.1, 283.2, 127.6, 213.3, 136.4, 137.0, 126.3, 274.0, 135.3, 75.9, 339.4, 133.3, 167.0, 221.2, 150.3, 70.7, 222.2, 75.3, 117.7, 70.1, 154.3, 212.0, 183.0],
		['2011', 149.7, 133.4, 71.9, 237.2, 107.1, 128.8, 300.7, 129.2, 205.7, 138.5, 134.2, 125.8, 286.6, 117.5, 66.2, 328.1, 147.2, 161.9, 219.3, 147.7, 76.4, 222.1, 74.0, 115.4, 73.2, 150.2, 210.6, 179.5],
		['2012', 146.4, 131.8, 72.4, 238.9, 106.7, 129.4, 306.4, 129.1, 194.4, 140.6, 132.1, 126.4, 299.2, 91.7, 62.5, 317.4, 131.0, 155.1, 219.3, 147.4, 74.7, 223.7, 72.9, 113.6, 73.1, 157.8, 212.2, 178.5]
	];

	FORBANNAD.loadChart(drawChart);

	function drawChart() {
		var chartData = google.visualization.arrayToDataTable(dataArray);

		var formatter = new google.visualization.NumberFormat(FORBANNAD.numberFormats.twoDigitPercentage);

		FORBANNAD.formatChartDataInColumnRange(formatter, chartData, 1, dataArray[0].length - 1);

		// Find the largest value in our data, so we can set a proper ceiling
		// in the chart, better than the automatic one at least.
		var largestValue = Math.max.apply(Math, $.map(dataArray.slice(1), function (row) {
			return Math.max.apply(Math, row.slice(1));
		}));

		var additionalChartOptions = {
			vAxis: {
				format: FORBANNAD.vAxisFormats.roundedPercentage,
				viewWindow: { max: Math.round(largestValue) + 10 }
			},
			lineWidth: FORBANNAD.lineWidths.thin,
			series: {
				26: { // Sverige
					lineWidth: FORBANNAD.lineWidths.thick
				}
			}
		};

		var chart = new google.visualization.LineChart(document.getElementById('chart'));

		chart.draw(chartData, $.extend({}, FORBANNAD.defaultChartOptions, additionalChartOptions));
	}
}());
